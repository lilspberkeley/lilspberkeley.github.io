<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>CS 180 Project 1</title>
</head>

<body>
    <!-- Title -->
    <div class="navbar clear nav-top">
        <div class="row" style="text-align: center;">
            <h1>CS 180 Project 1: Colorizing the Prokudin-Gorskii photo collection</h1>
            <b>By Shreyas Prasanna</b>
        </div>
    </div>
    
    <p>The goal of this assignment is to take the digitized Prokudin-Gorskii glass plate images and, using image processing techniques, automatically produce a color image with as few visual artifacts as possible. There were two types of images - .jpg (smaller and simpler) and .tif (required image pyramid) </p>
    <h2>Single-Scale Alignment</h2>
    <p>The Green (G) and Red (R) channels are aligned to the Blue (B) channel by searching for the best displacement within a specified window (e.g., [-15, 15] pixels in both x and y directions). The search is exhaustive, meaning that every possible pixel shift in this window is tested.</p>

    <h2>Pyramid-Based Alignment</h2>
    <p>For larger images, exhaustive search can be computationally expensive. To mitigate this, a coarse-to-fine approach using an image pyramid is applied. The image is scaled down (rescaled by a factor of 2) to multiple levels, forming an image pyramid. Alignment starts at the coarsest level (smallest image), where the search space is much smaller. Once a good alignment is found at this level, the result is used as a starting point for finer levels, scaling up and refining the alignment progressively.
     The displacement offsets found at each pyramid level are doubled for the next finer level to account for the scaling.   
    </p>

    <h2>Issues Faced</h2>
    <ul>
        <li>Had to make some changes to my system to accomidate the various libraries used</li>
        <li>Spent additional time on the pyramid, using Euclidean Distance</li>
        <li>Before using the L2 Norm, I had tried using NCC</li>
    </ul>

    <h2 id="single-scale-alignment-results">Results</h2>
                <div class="gallery">
                    <img src="results/cathedral.png" />
                    <img src="results/monastery.png" />
                    <img src="results/tobolsk.png" />
                </div>
    <h2 id="single-scale-alignment-offsets">Offsets</h2>
    <ul>
        <li>Cathedral: (-1, 1) ; (-1, 7)</li>
        <li>Monastery: (0, -6) ; (1, 9)</li>
        <li>Tobalsk: (2,3) ; (3,6)</li>
    </ul>

    <h2 id="multi-scale-alignment-results">Results</h2>
                <div class="gallery">
                    <img src="results/church.png" />
                    <img src="results/emir.png" />
                    <img src="results/harvesters.png" />
                    <img src="results/icon.png" />
                    <img src="results/lady.png" />
                    <img src="results/melons.png" />
                    <img src="results/onion_church.png" />
                    <img src="results/sculpture.png" />
                    <img src="results/self_portrait.png" />
                    <img src="results/three_generations.png" />
                    <img src="results/train.png" />
                </div>

    <h2 id="multi-scale-alignment-offsets">Offsets</h2>
    <ul>
        <li>Church: Offsets: (-5, 0) ; (-13, 15) and Pyramid Offsets: (-27, 0) ; (-39, 41)</li>
        <li>Emir: Offsets: (7, -3) ; (15, -15) and Pyramid offsets: (33, -11) ; (41, -41)</li>
        <li>Harvesters: Offsets: (-3, 15) ; (-2, 15) and Pyramid offsets: (-23, 41) ; (-14, 41)</li>
        <li>Icon: Offsets: (15, 15) ; (-7, 15) and Pyramid offsets: (15, 41) ; (-33, 41)</li>
        <li>Lady: Offsets: (-8, 15); (-15, 15) and Pyramid Offsets: (-34, 41) ; (-41, 41)</li>
        <li>Melons: Offsets: (-4, 15); (-8, 15) and Pyramid offsets: (-24, 41); (-34, 41) </li>
        <li>Onion Church: Offsets: (0, 15) ; (-1, 15) and Pyramid offsets: (0, 41) ; (-7, 41)</li>
        <li>Sculpture: Offsets: (-10, 15) ; (-2, 15) and Pyramid offsets: (-36, 41); (-14, 41)</li>
        <li>Self Portrait: Offsets: (-3, 15) ; (-6, 15) and Pyramid offsets: (-21, 41) ; (-30, 41)</li>
        <li>Three Generations: Offsets: (1, 15) ; (3, 15) and Pyramid offsets: (7, 41) ; (19, 41)</li>
        <li>Train: Offsets: (-6, 0) ; (-1,15) and (-30, 0) ; (-7, 41)</li>
    </ul>
    

  
</html>
